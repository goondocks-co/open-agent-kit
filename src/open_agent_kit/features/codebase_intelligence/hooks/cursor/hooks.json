{
  "$comment": "Codebase Intelligence hooks for Cursor. {{PORT}} is replaced with the project-specific daemon port. OAK hooks are identified by the /api/oak/ci/ URL pattern.",
  "version": 1,
  "hooks": {
    "beforeSubmitPrompt": [
      {
        "command": "(curl -sf http://localhost:{{PORT}}/api/health >/dev/null 2>&1 || oak ci start --quiet >/dev/null 2>&1 || true) && curl -s -X POST http://localhost:{{PORT}}/api/oak/ci/before-prompt -H \"Content-Type: application/json\" -d '{\"agent\": \"cursor\"}'"
      }
    ],
    "afterFileEdit": [
      {
        "command": "curl -s -X POST http://localhost:{{PORT}}/api/oak/ci/post-tool-use -H \"Content-Type: application/json\" -d '{\"agent\": \"cursor\", \"tool_name\": \"file_edit\"}'"
      }
    ],
    "afterAgentResponse": [
      {
        "command": "curl -s -X POST http://localhost:{{PORT}}/api/oak/ci/post-tool-use -H \"Content-Type: application/json\" -d '{\"agent\": \"cursor\", \"tool_name\": \"agent_response\"}'"
      }
    ],
    "stop": [
      {
        "command": "curl -s -X POST http://localhost:{{PORT}}/api/oak/ci/stop -H \"Content-Type: application/json\" -d '{\"agent\": \"cursor\"}'"
      }
    ],
    "sessionEnd": [
      {
        "command": "curl -s -X POST http://localhost:{{PORT}}/api/oak/ci/session-end -H \"Content-Type: application/json\" -d '{\"agent\": \"cursor\"}'"
      }
    ]
  }
}
