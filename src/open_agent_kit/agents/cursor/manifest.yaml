# Cursor Agent Manifest
# Cursor IDE's AI assistant with cloud agent capabilities

name: cursor
display_name: "Cursor"
version: "1.0.0"
description: "Cursor IDE AI assistant with cloud agents and MCP support"

installation:
  folder: ".cursor/"
  commands_subfolder: "commands"
  file_extension: ".md"
  # AGENTS.md in project root (shared with Codex)
  instruction_file: "./AGENTS.md"

requirements:
  requires_cli: false
  install_url: "https://cursor.com/download"

capabilities:
  has_background_agents: true   # Cloud agents (limited in some modes)
  background_agent_instructions: "Use Background Agents to run tasks in parallel cloud environments. Launch cloud agents from the Cursor editor or cursor.com/agents. Each agent works in an isolated copy of the codebase using git worktrees."
  has_native_web: false         # No general web search by default
  has_mcp: true                 # Full MCP support via configuration
  research_strategy: "Deep research via MCP web-search + background agents"

  # Capability tiers for prompt complexity adaptation
  # Cursor can use various models - capabilities depend on user's model selection
  reasoning_tier: variable      # high | medium | basic | variable - depends on selected model
  context_handling: large       # large | medium | small - Cursor optimizes context well
  model_consistency: variable   # high | medium | variable - user can switch models

  # Skills support (Agent Skills standard)
  # Compatible with Claude Code SKILL.md format
  # Cursor uses .cursor/skills/ for project-level skills
  # See: https://cursor.com/docs/context/skills
  has_skills: true
  skills_directory: "skills"    # .cursor/skills/

# Codebase Intelligence configuration
ci:
  # Plan storage - Cursor stores plans in ~/.cursor/plans/ (global) or .cursor/plans/ (project)
  # Detected via postToolUse hook when Write occurs to .cursor/plans/ path
  plans_subfolder: "plans"

  # Plan execution detection - when user clicks "Build" in plan mode,
  # Cursor injects a prompt starting with this prefix
  plan_execution_prefix: "Implement the plan as specified"

  # Exit plan mode detection: TBD - monitor postToolUse for plan-related tools
  # Cursor may use a specific tool to signal plan mode completion
  exit_plan_tool: null

  # Transcript configuration - Cursor stores transcripts in ~/.cursor/projects/
  # Path pattern: ~/.cursor/projects/{project-path}/agent-transcripts/{session-id}.txt
  # Note: Cursor uses .txt files, not .jsonl, and different encoding (no leading dash)
  transcript:
    base_dir: ".cursor/projects"
    path_pattern: "{encoded_project}/agent-transcripts/{session_id}.txt"
    project_encoding: "slash-to-dash-no-leading"

  # Session continuation triggers - which SessionStart sources indicate continuation
  # Note: Cursor's continuation sources may differ from Claude - adjust based on actual behavior
  continuation:
    continuation_sources:
      - resume       # Session resumed after pause
      - new_context  # New context window started

# Governance capabilities
governance:
  supports_observe: true
  supports_deny: true
  deny_format: "cursor_permission"

settings:
  # Auto-approval settings for oak commands
  # Note: Cursor's agent settings use the same file as IDE settings
  auto_approve:
    enabled: true
    file: ".cursor/settings.json"
    format: json
    template: "agent-settings/cursor-settings.json"  # Template from features/core/

mcp:
  # MCP server registration config
  config_file: ".cursor/mcp.json"
  format: json
  servers_key: "mcpServers"
  # No CLI support - direct JSON manipulation only
  # JSON entry format
  entry_format:
    command: "{cmd}"
    args: "{args}"

# Hooks configuration for Codebase Intelligence
# Cursor uses a standalone hooks.json with flat structure
hooks:
  type: json
  config_file: "hooks.json"
  hooks_key: "hooks"
  format: flat
  version_key: "version"
  template_file: "hooks.json"
